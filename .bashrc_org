############  Cogito  #############
export HGREPO42=ssh://hg@10.0.1.42
export COGITO_NAS=nas01.cogitohealth.net
export JAVA_HOME=/usr/java/jdk1.7.0_15/
export PATH=$PATH:$HOME/tools/arcanist/bin
eval `~/src/Platform/Cogito/Toolset/Modula/BUILD/bin/modula init`
eval `ssh-agent -s`
ssh-add

alias mod='modula'
alias modb='modula build'
alias modg='modula graph'
alias modgm='modula graph modules'
alias modx='modula graph modules exec'

#mount nas01 drives
function nasmount
{
   if (( $# == 1 )); then
       sudo mount -t cifs //${COGITO_NAS}/${1} ~/mnt/${1} -o username=`id -un`,uid=`id -un`,gid=`id -gn`;
   elif (( $# == 2 )); then
       sudo mount -t cifs //${COGITO_NAS}/${1} ~/mnt/${1} -o username=${2},uid=`id -un`,gid=`id -gn`;
   fi
}

#modula operations 
alias modx-br='modula graph modules exec "hg branch"'
alias modx-branch='modula graph modules exec "hg branch"'
alias modx-cl='modula graph modules exec "rm -rf BUILD/"'
alias modx-clean='modula graph modules exec "rm -rf BUILD/"'
alias modx-st='modula graph modules exec "hg status"'
alias modx-status='modula graph modules exec "hg status"'
alias modx-dif='modula graph modules exec "hg diff"'
alias modx-diff='modula graph modules exec "hg diff"'
alias modx-sum='modula graph modules exec "hg sum"'
alias modx-summary='modula graph modules exec "hg sum"'


alias modg1='modula graph | egrep -v "\s{5}"'
alias modg2='modula graph | egrep -v "\s{9}"'
alias modg3='modula graph | egrep -v "\s{13-"'

#Source Control overrides
alias dif='hg diff'
alias ss='hg stat'
alias sl='hg log'

hg_branchdiff() {
#todo error check and usage message
SRC=eval `hg branch`
DEST="EnterpriseSuite_1_5_0"
hg diff -r "branch ('$SRC') - branch ('$DEST')"
}
alias branchdiff=hg_branchdiff

